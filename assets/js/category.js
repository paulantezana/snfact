"use strict";var CategoryForm={currentModeForm:"create",modalName:"categoryModalForm",currentForm:null,submitButton:null,loading:!1,init:function(){this.currentForm=document.getElementById("categoryForm"),this.submitButton=document.getElementById("categoryFormSubmit"),this.list()},search:function(t){t.preventDefault(),this.list(1,10,t.target.value)},list:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,e=this,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:10,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",i=document.getElementById("categoryTable");i&&(this.setLoading(!0),RequestApi.fetchText("/category/table?limit="+o+"&page="+t+"&search="+n,{method:"GET"}).then(function(t){i.innerHTML=t}).finally(function(t){e.setLoading(!1)}))},setLoading:function(t){this.loading=t;var e=document.querySelectorAll(".jsCategoryOption");this.loading?(this.submitButton&&(this.submitButton.setAttribute("disabled","disabled"),this.submitButton.classList.add("loading")),e&&e.forEach(function(t){t.setAttribute("disabled","disabled")})):(this.submitButton&&(this.submitButton.removeAttribute("disabled"),this.submitButton.classList.remove("loading")),e&&e.forEach(function(t){t.removeAttribute("disabled")}))},clearForm:function(){this.currentForm&&this.currentForm.reset()},submit:function(t){var e=this;t.preventDefault(),this.setLoading(!0);var o="",n={};n.name=document.getElementById("categoryName").value||"",n.description=document.getElementById("categoryDescription").value||"",n.state=document.getElementById("categoryState").checked||!1,n.parentId=0,"create"===this.currentModeForm&&(o="/category/create"),"update"===this.currentModeForm&&(o="/category/update",n.categoryId=document.getElementById("categoryId").value||0),RequestApi.fetch(o,{method:"POST",body:n}).then(function(t){t.success?(SnModal.close(e.modalName),SnMessage.success({content:t.message}),e.list()):SnModal.error({title:"Algo salió mal",content:t.message})}).finally(function(t){e.setLoading(!1)})},delete:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";this.setLoading,this.list;SnModal.confirm({title:"¿Estás seguro de eliminar este registro?",content:e,okText:"Si",okType:"error",cancelText:"No",onOk:function(){var e=this;this.setLoading(!0),RequestApi.fetch("/category/delete",{method:"POST",body:{categoryId:t||0}}).then(function(t){t.success?(SnMessage.success({content:t.message}),e.list()):SnModal.error({title:"Algo salió mal",content:t.message})}).finally(function(t){e.setLoading(!1)})}})},showModalCreate:function(){this.currentModeForm="create",this.clearForm(),SnModal.open(this.modalName)},executeUpdateNormal:function(t){this.currentModeForm="update",this.showModalUpdate(t)},showModalUpdate:function(t){var e=this;this.clearForm(),this.setLoading(!0),RequestApi.fetch("/category/id",{method:"POST",body:{categoryId:t||0}}).then(function(t){t.success?(document.getElementById("categoryName").value=t.result.name,document.getElementById("categoryDescription").value=t.result.description,document.getElementById("categoryState").checked="0"!=t.result.state,document.getElementById("categoryId").value=t.result.category_id,SnModal.open(e.modalName)):SnModal.error({title:"Algo salió mal",content:t.message})}).finally(function(t){e.setLoading(!1)})}};document.addEventListener("DOMContentLoaded",function(){CategoryForm.init()});